---------------------------
Terraform Training Program
---------------------------

-------------
Session 2:
-------------


Problem Statement:

I have to provision following services in AWS:

1.) 1 VPC, 2 Public Subnet, 2 Private Subnet
2.) 1 ALB with target groups
3.) Auto-scaling group with min & max 2-5

I have to do everything via Terraform and these set of services needs to be created in 4 envs... dev, qa, staging and Prod.

Will you create a single set of TF code with variables, loops and conditions?


My code is ready, I will now provision my dev env:


cd C:\PPMCAD12\Terraform\session2\sample-tf

terraform init
terraform plan --var-file=dev.tfvars
terraform apply --var-file=dev.tfvars


Now dev is ready...

terraform.tfstate file gets created

this file keeps all the record of resources generated for the dev

Now we have to do the same for QA:

cd C:\PPMCAD12\Terraform\session2\sample-tf

terraform init
terraform plan --var-file=qa.tfvars
terraform apply --var-file=qa.tfvars


/// provide step by step guide to create and use a module..

for local testing and for production env

// activity guide for terraform


-- 

Problem Statement 2:

Dev 1 has a TF code to provision following services in AWS:

1.) 1 VPC, 2 Public Subnet, 2 Private Subnet
2.) 1 ALB with target groups
3.) Auto-scaling group with min & max 2-5

Dev1 created a folder, named "dev"

Go inside that folder... and executed TF commands

terraform init (initialized a remote backend state)
a link between dev1 local tfstate file and the remote state file gets established

e.g.: AWS S3 bucket, Azure blobs, GCP buckets

terraform apply

A file named as "terraform.tfstate" will get generated in their local directory

---Dev1 got busy in something else

Dev 2, now has to take the TF code (clone the TF code) and make some changes in it and again apply

this person...

1.) git clone <git-url>-<tf-code>
2.) cd <tf-code>
3.) make the changes in the .tf files (whatever the changes are req)
4.) run TF commands:
    - tf init (remote backend state file is synced to Dev2's local)
    - tf apply 

Possible answers:
- conflict of state - correct
- tf apply will fail... 

How does TF knows if the resource is created or not?
-

